# Dynamic Lock for Obsidian

> **워크플로우를 동적으로 보호하세요.**
> 파일 속성, 폴더, 시간 기반으로 **읽기 모드**와 **편집 모드**를 자동 전환합니다.

![Version](https://img.shields.io/badge/version-1.3.3-blue) ![License](https://img.shields.io/badge/license-MIT-green)

**작성**과 **참조** 사이를 자연스럽게 이동하세요. 완성된 노트는 실수로 수정되지 않도록 보호하고, 작성 중인 초안은 바로 편집할 수 있게 유지합니다.

---

## 기능

- **스마트 잠금 로직**:
    - **강제 잠금 (읽기)**: 리뷰나 프레젠테이션을 위해 파일을 영구적으로 잠급니다.
    - **안전 편집 (편집)**: 편집을 허용하되, 아카이브 파일의 명시적 잠금은 유지합니다.
- **폴더 규칙**: 특정 폴더의 파일을 자동으로 잠급니다 (예: `Archives/`, `References/`). 최장 접두사 매칭을 지원합니다.
- **Frontmatter 규칙**: 메타데이터를 사용해 개별 파일을 잠급니다 (예: `status: done`, `type: archive`).
- **시간 기반 자동 잠금**: 생성일 또는 수정일 기준으로 오래된 노트를 자동으로 잠급니다 (예: "생성 후 30일 경과 시 잠금").
- **시각적 표시**:
    - **상태 표시줄**: 현재 전역 모드를 한눈에 확인할 수 있습니다 (Auto, Locked, Editing).
    - **탭 아이콘**: **읽기 모드**일 때 탭 헤더에 잠금 아이콘이 표시됩니다.
- **단축키 및 명령어**: 명령어 팔레트를 통해 모드를 즉시 전환하거나 잠금을 토글할 수 있습니다.

---

## 작동 방식

Dynamic Lock은 **우선순위 시스템**에 따라 뷰 모드를 결정합니다:

1.  **전역 강제 읽기**: 모든 것을 덮어씁니다. 프레젠테이션에 유용합니다.
2.  **Frontmatter 규칙**: 파일 수준의 명시적 제어 (`status: done` -> 읽기).
3.  **폴더 규칙**: 섹션 수준의 제어 (`Archives/` -> 읽기).
4.  **시간 기반 잠금**: (활성화된 경우) 오래된 파일을 자동으로 잠급니다.
5.  **전역 강제 편집**: 편집 모드를 강제합니다.
6.  **자동 모드**:
    - **엄격한 규칙**: 위 규칙과 일치하는 파일을 잠급니다.
    - **자유로운 탐색**: 새 파일은 잠기지 않는 한 **편집 모드**가 기본값입니다.
    - **탭 유지**: 탭을 전환해도 열린 파일의 수동 모드(읽기/편집)가 유지됩니다.

---

## 사용법

### 1. 전역 모드 (상태 표시줄 클릭)
| 아이콘 | 모드 | 설명 |
| :--- | :--- | :--- |
| Auto | **자동** | **스마트 모드**. 일치하는 파일은 잠그고, 나머지는 편집 가능하게 유지하며, 탭 상태를 기억합니다. |
| Locked | **읽기** | **프레젠테이션 모드**. 모든 파일을 읽기 뷰로 강제합니다. |
| Editing | **편집** | **작업 모드**. 편집 뷰를 강제합니다 (수동 읽기 설정 초기화). |

> **팁**: `Dynamic Lock: Cycle Global Mode`에 단축키를 지정하면 빠르게 전환할 수 있습니다!

### 2. 시간 기반 잠금
파일을 수동으로 잠글 필요가 없습니다.
- **설정 > Time-based Lock**으로 이동합니다.
- 활성화하고 기간을 설정합니다 (예: **30일**).
- **생성일** (일일 노트/일기에 적합) 또는 **수정일** (위키에 적합)을 선택합니다.

### 3. 시각적 피드백
잠금 상태가 명확하고 직관적으로 표시됩니다:
- **잠금 아이콘**: 파일이 **읽기 모드**일 때 탭 헤더에 나타납니다 (규칙에 의해 강제되었든 수동으로 설정했든).
- **아이콘 없음**: 파일이 **편집 모드**입니다.

---

## 설치

1.  Obsidian에서 **설정 > 커뮤니티 플러그인**을 엽니다.
2.  **제한 모드**를 끕니다.
3.  **찾아보기**를 클릭하고 `Dynamic Lock`을 검색합니다.
4.  **설치**를 클릭한 다음 **활성화**합니다.

### 수동 설치
1.  [릴리스](https://github.com/Ryeom/obsidian-dynamic-lock/releases)에서 `main.js`, `manifest.json`, `styles.css`를 다운로드합니다.
2.  `<vault>/.obsidian/plugins/obsidian-dynamic-lock/`에 복사합니다.
3.  Obsidian을 다시 로드합니다.

---

## 명령어

| 명령어 | 동작 |
| :--- | :--- |
| `Cycle global mode` | 전환: Auto → Reading → Editing → ... |
| `Set global mode to auto` | 스마트 규칙으로 초기화합니다. |
| `Set global lock (reading)` | 엄격한 읽기 모드를 강제합니다. |
| `Set global mode to editing` | 편집 모드를 강제합니다. |

---

made by **Ryeom**
